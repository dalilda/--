2022年6月9日

---
设置编码格式:
![图 32](iamges/20220609200223.png)  
![图 33](iamges/20220609200317.png)  
![图 34](iamges/20220609200342.png)  
![图 35](iamges/20220609200616.png)  
![图 36](iamges/20220609201236.png)  
![图 37](iamges/20220609201304.png)  
![图 38](iamges/20220609201343.png)  

---
servlet继承关系
![图 39](iamges/20220609212949.png)  
![图 40](iamges/20220609213116.png)  
![图 41](iamges/20220609213218.png)  
![图 42](iamges/20220609213332.png)  
![图 43](iamges/20220609213419.png)  
![图 44](iamges/20220609213514.png)  
![图 45](iamges/20220609213536.png)  
![图 46](iamges/20220609213656.png)  
![图 47](iamges/20220609214003.png)  
![图 48](iamges/20220609214509.png)  
![图 49](iamges/20220609214647.png)  
![图 50](iamges/20220609214824.png)  
![图 51](iamges/20220609214843.png)  
![图 52](iamges/20220609214913.png)  
![图 53](iamges/20220609215028.png)  
刚刚不知道为什么报错了,jdk源
![图 54](iamges/20220609220634.png)  
![图 56](iamges/20220609220722.png)  
继续演示:
![图 57](iamges/20220609220914.png)  
![图 58](iamges/20220609220943.png)  
![图 59](iamges/20220609221032.png)  
![图 60](iamges/20220609221126.png)  
![图 61](iamges/20220609221300.png)  
![图 62](iamges/20220609221448.png)  

---
servlet生命周期
![图 63](iamges/20220609221733.png)  
![图 64](iamges/20220609222043.png)  
![图 65](iamges/20220609222103.png)  
![图 66](iamges/20220609222139.png)  
![图 67](iamges/20220609222237.png)  
![图 68](iamges/20220609222246.png)  
![图 69](iamges/20220609222355.png)  
![图 70](iamges/20220609222451.png)  
![图 71](iamges/20220609222519.png)  
![图 72](iamges/20220609222621.png)  
![图 73](iamges/20220609222643.png)  
![图 74](iamges/20220609222702.png)  
![图 75](iamges/20220609222717.png)  
![图 76](iamges/20220609222735.png)  
![图 77](iamges/20220609222818.png)  
![图 78](iamges/20220609223214.png)  
![图 79](iamges/20220609223237.png)  
![图 80](iamges/20220609223317.png)  
![图 81](iamges/20220609223449.png)  
![图 82](iamges/20220609223622.png)
load-on-startup  
![图 83](iamges/20220609224145.png)  
![图 84](iamges/20220609224203.png)  
![图 85](iamges/20220609224347.png)  
![图 86](iamges/20220609224411.png)  

单实例,多线程不安全
![图 87](iamges/20220609224606.png)  
![图 88](iamges/20220609224703.png)  
![图 89](iamges/20220609224720.png)  
![图 90](iamges/20220609224955.png)  

---
HTTP协议
![图 91](iamges/20220609225310.png)  
![图 92](iamges/20220609225359.png)  
请求
![图 93](iamges/20220609225438.png)
![图 95](iamges/20220609225646.png)  
![图 96](iamges/20220609225730.png)  
![图 97](iamges/20220609225749.png)  
![图 98](iamges/20220609225829.png)  
![图 99](iamges/20220609225914.png)  
![图 100](iamges/20220609230111.png)  
![图 101](iamges/20220609230220.png)  
![图 102](iamges/20220609230519.png)  
![图 103](iamges/20220609230605.png)  
![图 104](iamges/20220609230820.png)  
![图 105](iamges/20220609230941.png)  
响应
![图 106](iamges/20220609231143.png)  
![图 107](iamges/20220609231417.png)  
![图 110](iamges/20220609231753.png)  
![图 108](iamges/20220609231628.png)  
![图 109](iamges/20220609231649.png)  

---
会话
HTTP是无状态的。
![图 1](iamges/20220611005254.png)  
![图 2](iamges/20220611005337.png)
实验一下：
![图 1](iamges/20220611225328.png)  
![图 2](iamges/20220611225504.png)  
![图 3](iamges/20220611225703.png)  
![图 4](iamges/20220611225836.png)  
![图 5](iamges/20220611225934.png)  
![图 6](iamges/20220611230024.png)  
![图 7](iamges/20220611230400.png)  
![图 8](iamges/20220611230432.png)  
![图 9](iamges/20220611230515.png)  
![图 10](iamges/20220611230535.png)  
![图 11](iamges/20220611230621.png)  
![图 12](iamges/20220611230640.png)  
![图 13](iamges/20220611230750.png)  
![图 14](iamges/20220611230834.png)  
![图 15](iamges/20220611230858.png)  
![图 16](iamges/20220611230921.png)  
![图 17](iamges/20220611231004.png)  
![图 18](iamges/20220611231038.png)  
![图 19](iamges/20220611231056.png)  
![图 20](iamges/20220611231153.png)  
![图 21](iamges/20220611231519.png)  

Session保存作用域
![图 22](iamges/20220611232011.png)  
实验一下：
![图 23](iamges/20220611232230.png)  
![图 24](iamges/20220611232259.png)  
![图 25](iamges/20220611232318.png)  
![图 26](iamges/20220611232405.png)  
![图 27](iamges/20220611232439.png)  
![图 28](iamges/20220611232513.png)  
![图 29](iamges/20220611232536.png)  
![图 30](iamges/20220611232728.png)  
![图 31](iamges/20220611232903.png)  
![图 32](iamges/20220611232943.png)  
![图 33](iamges/20220611232955.png) 
 
服务器端转发与客户端重定向
![图 1](iamges/20220612165543.png)  
![图 2](iamges/20220612165755.png)  
![图 3](iamges/20220612170012.png)  
服务器转发演示：
![图 4](iamges/20220612170412.png)  
![图 5](iamges/20220612170451.png) 
![图 6](iamges/20220612171221.png)  
![图 7](iamges/20220612170541.png)
![图 14](iamges/20220612171413.png)  
![图 15](iamges/20220612171425.png)  
![图 16](iamges/20220612171438.png)  
![图 17](iamges/20220612171456.png)  
![图 18](iamges/20220612171607.png)  
![图 19](iamges/20220612171720.png)  
客户端重定向演示：
![图 20](iamges/20220612171900.png)  
![图 21](iamges/20220612171930.png)  
![图 22](iamges/20220612172001.png)  
![图 23](iamges/20220612172220.png)  
![图 24](iamges/20220612172702.png)  
![图 25](iamges/20220612172745.png)  
![图 26](iamges/20220612172805.png)  
![图 27](iamges/20220612172937.png)  

Thymeleaf-视图模板技术：
![图 1](iamges/20220614155945.png)  
![图 1](iamges/20220617130608.png)  
![图 2](iamges/20220617130945.png)  
![图 3](iamges/20220617131039.png)  
![图 4](iamges/20220617131408.png)  
![图 5](iamges/20220617131458.png)  
![图 6](iamges/20220617131556.png)  
![图 7](iamges/20220617131637.png)  
![图 8](iamges/20220617131719.png)  
![图 9](iamges/20220617131801.png)  
![图 10](iamges/20220617131923.png)  
![图 11](iamges/20220617131931.png)  
![图 12](iamges/20220617131940.png)  
![图 13](iamges/20220617132425.png)  
![图 14](iamges/20220617132634.png)  
![图 15](iamges/20220617132736.png)  
![图 16](iamges/20220617132919.png)  
![图 17](iamges/20220617133012.png)  
![图 18](iamges/20220617133115.png)  
![图 19](iamges/20220617133155.png)  
![图 20](iamges/20220617133220.png)  
![图 21](iamges/20220617133240.png)  
![图 22](iamges/20220617133409.png)  
![图 23](iamges/20220617133523.png)  
![图 24](iamges/20220617133541.png)  
![图 25](iamges/20220617133620.png)  
![图 26](iamges/20220617133639.png)  
![图 29](iamges/20220617134320.png)
![图 30](iamges/20220617134433.png)  
![图 31](iamges/20220617134720.png)  

![图 1](iamges/20220619173027.png)  
![图 2](iamges/20220619173138.png) 
![图 3](iamges/20220619173302.png)   
```java
public class ViewBaseServlet extends HttpServlet {

    private TemplateEngine templateEngine;

    @Override
    public void init() throws ServletException {

        // 1.获取ServletContext对象
        ServletContext servletContext = this.getServletContext();

        // 2.创建Thymeleaf解析器对象
        ServletContextTemplateResolver templateResolver = new ServletContextTemplateResolver(servletContext);

        // 3.给解析器对象设置参数
        // ①HTML是默认模式，明确设置是为了代码更容易理解
        templateResolver.setTemplateMode(TemplateMode.HTML);

        // ②设置前缀
        String viewPrefix = servletContext.getInitParameter("view-prefix");

        templateResolver.setPrefix(viewPrefix);

        // ③设置后缀
        String viewSuffix = servletContext.getInitParameter("view-suffix");

        templateResolver.setSuffix(viewSuffix);

        // ④设置缓存过期时间（毫秒）
        templateResolver.setCacheTTLMs(60000L);

        // ⑤设置是否缓存
        templateResolver.setCacheable(true);

        // ⑥设置服务器端编码方式
        templateResolver.setCharacterEncoding("utf-8");

        // 4.创建模板引擎对象
        templateEngine = new TemplateEngine();

        // 5.给模板引擎对象设置模板解析器
        templateEngine.setTemplateResolver(templateResolver);

    }

    protected void processTemplate(String templateName, HttpServletRequest req, HttpServletResponse resp) throws IOException {
        // 1.设置响应体内容类型和字符集
        resp.setContentType("text/html;charset=UTF-8");

        // 2.创建WebContext对象
        WebContext webContext = new WebContext(req, resp, getServletContext());

        // 3.处理模板数据
        templateEngine.process(templateName, webContext, resp.getWriter());
    }
}
```
![图 4](iamges/20220619173542.png)  
![图 5](iamges/20220619173734.png)  
![图 6](iamges/20220619173924.png)  
![图 7](iamges/20220619174038.png)  
现在我们能把请求转到index页面上。
接着我们要在index页面上，把数据动态整合进去。

需要使用thyemleaf：

![图 1](iamges/20220619221441.png)  
![图 2](iamges/20220619221510.png)  
![图 3](iamges/20220619221658.png)  
![图 4](iamges/20220619221803.png)  
![图 5](iamges/20220619221952.png)  
![图 6](iamges/20220619222056.png)  
![图 7](iamges/20220619222157.png)  
![图 8](iamges/20220619222342.png)  
![图 9](iamges/20220619222432.png)  
![图 10](iamges/20220619222636.png)  
![图 11](iamges/20220619222657.png)  
![图 12](iamges/20220619222732.png)  
![图 13](iamges/20220619222810.png)  
![图 14](iamges/20220619223053.png)  
![图 15](iamges/20220619223137.png)  
![图 16](iamges/20220619223223.png)  
![图 17](iamges/20220619223310.png)  
http://c.biancheng.net/spring_boot/thymeleaf.html

![图 18](iamges/20220619223649.png)  
![图 19](iamges/20220619223733.png)  
![图 20](iamges/20220619223800.png)  
![图 21](iamges/20220619223850.png)  
![图 22](iamges/20220619223917.png)  


---
保存作用域：
![图 1](iamges/20220622205419.png) 
request保存作用域 
![图 2](iamges/20220622205458.png)  
![图 18](iamges/20220622212251.png)  
![图 3](iamges/20220622210133.png)  
![图 4](iamges/20220622210327.png)  
![图 5](iamges/20220622210445.png)  
![图 6](iamges/20220622210510.png)  
![图 7](iamges/20220622210615.png)  
![图 8](iamges/20220622210631.png)  
![图 9](iamges/20220622210707.png)  
Dispatcher
![图 10](iamges/20220622210928.png)  
![图 11](iamges/20220622210954.png)  
![图 12](iamges/20220622211111.png)  
senRedirect
![图 13](iamges/20220622211237.png)  
![图 14](iamges/20220622211428.png)  
![图 15](iamges/20220622211535.png)  
![图 16](iamges/20220622211559.png)  
![图 17](iamges/20220622211715.png)  

session保存作用域
![图 19](iamges/20220622212757.png)  
![图 21](iamges/20220622213633.png)  
![图 22](iamges/20220622213708.png)  
![图 23](iamges/20220622213744.png)  
![图 24](iamges/20220622213838.png)  
![图 25](iamges/20220622213904.png)  
![图 26](iamges/20220622213949.png)  
![图 27](iamges/20220622214026.png)  
![图 28](iamges/20220622214045.png)  
![图 29](iamges/20220622214120.png)  
![图 30](iamges/20220622214211.png)  
换成dispatcher结果一样
![图 31](iamges/20220622214556.png)  
![图 32](iamges/20220622215248.png)  

application保存作用域
![图 20](iamges/20220622213022.png)  
![图 33](iamges/20220622220047.png)  
![图 34](iamges/20220622220205.png)  
![图 35](iamges/20220622220356.png)  
![图 36](iamges/20220622220508.png)  

![图 37](iamges/20220622220531.png)  

---






